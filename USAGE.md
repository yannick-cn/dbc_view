# DBC Viewer 使用说明

## 快速开始

### 1. 编译应用程序
```bash
./build.sh
```

### 2. 运行应用程序
```bash
cd build
./DBCViewer
```

### 3. 加载DBC文件
1. 点击菜单 "File" -> "Open DBC File..."
2. 选择 `ADC321_CAN_ADASTORADAR_2025_08_25_V0.0.2.dbc` 文件
3. 开始浏览CAN消息和信号

## 界面说明

### 主窗口布局
- **左侧面板**: CAN消息树形视图
- **右上面板**: 信号表格
- **右下面板**: 信号详细信息

### 功能特性

#### 1. 消息树形视图
- 显示所有CAN消息（ID、名称、长度、发送者、周期时间）
- 每个消息下显示其包含的所有信号
- 支持按ID排序
- 点击消息或信号可查看详细信息

#### 2. 信号表格
- 显示选中消息的所有信号
- 包含信号的基本属性：
  - 名称
  - 起始位
  - 长度
  - 因子
  - 偏移量
  - 最小值
  - 最大值
  - 单位

#### 3. 信号详细信息
- **属性标签页**: 显示信号的完整技术规格
  - 位域信息（起始位、长度、字节序）
  - 数据转换公式（物理值 = 原始值 × 因子 + 偏移量）
  - 取值范围和单位
  - 接收者信息

- **值表标签页**: 显示信号的枚举值定义
  - 原始值到描述的映射
  - 例如：0 = "Invalid", 1 = "Valid"

## 示例DBC文件分析

当前项目包含的 `ADC321_CAN_ADASTORADAR_2025_08_25_V0.0.2.dbc` 文件包含：

### CAN消息
1. **ChassisMsg (ID: 0x671)**
   - 64字节长度
   - 20ms周期
   - 包含车辆底盘相关信号

2. **ADC_TimeSync (ID: 0x672)**
   - 16字节长度
   - 500ms周期
   - 时间同步相关信号

3. **BodyInfo (ID: 0x673)**
   - 32字节长度
   - 100ms周期
   - 车身信息相关信号

### 主要信号类型
- **车辆状态**: 横摆角速度、车速、转向角等
- **轮速信息**: 四个车轮的速度
- **加速度**: 纵向和横向加速度
- **车身状态**: 车门、转向灯、电源状态等
- **时间同步**: 时间戳和同步计数器

## 技术规格

### 支持的DBC格式
- ✅ CAN消息定义 (BO_)
- ✅ 信号定义 (SG_)
- ✅ 值表定义 (VAL_)
- ✅ 属性定义 (BA_)
- ✅ 消息周期时间
- ✅ 帧格式信息

### 数据转换
应用程序支持原始值到物理值的转换：
```
物理值 = 原始值 × 因子 + 偏移量
原始值 = (物理值 - 偏移量) ÷ 因子
```

### 位域解析
- 支持大端序和小端序
- 支持有符号和无符号数据
- 显示起始位和长度信息

## 故障排除

### 编译问题
如果遇到编译错误：
1. 确保安装了Qt5开发环境：
   ```bash
   sudo apt install qt5-default qtbase5-dev
   ```

2. 清理并重新编译：
   ```bash
   rm -rf build
   ./build.sh
   ```

### 运行问题
如果应用程序无法启动：
1. 检查Qt5运行时库：
   ```bash
   ldd build/DBCViewer
   ```

2. 确保有图形界面环境（X11或Wayland）

### DBC文件问题
如果DBC文件无法解析：
1. 检查文件格式是否正确
2. 查看控制台输出的错误信息
3. 确保文件编码为UTF-8

## 扩展功能

### 未来可能的改进
- 支持CAN FD格式
- 添加信号搜索功能
- 支持信号值实时监控
- 导出功能（CSV、JSON等）
- 多文件对比功能

## 联系支持

如有问题或建议，请查看项目README.md文件或提交Issue。
